<!DOCTYPE html>
<html>
<head>
    <title>Page Title</title>
    <meta charset="UTF-8"/>
</head>
<body>
    <script>
        function newGame() {
            function computerPlay() {
                const actionArray = ['Rock', 'Paper' , 'Scissors']
                let actionRandom = Math.floor(Math.random() * actionArray.length)
                let computerSelection = actionArray[actionRandom]

                console.log("Computer plays " + computerSelection)
                return actionArray.indexOf(computerSelection)
            }

            function playerSelection() {
                let selection = prompt("Type one: Rock, Paper, or Scissors")
                const legalSelection = ['rock', 'paper' , 'scissors']
                let isLegal = legalSelection.includes(selection.toLowerCase())

                if (isLegal) {
                    console.log("You play " + selection)
                    return legalSelection.indexOf(selection)
                } else {
                    alert("You cannot play " + selection + "! Try Again!")
                }
            }

            function playRound(playerSelection , computerPlay) {
                if (playerSelection === computerPlay) {
                    console.log("Draw!");
                    return currentRound -= 1
                } else if (playerSelection === 2 && computerPlay === 0){
                    console.log("You Lose!");
                    return computerScore += 1
                } else if (playerSelection > computerPlay || (playerSelection === 0 && computerPlay === 2)) {
                    console.log("You Win!");
                    return playerScore += 1
                }else {
                    console.log("You Lose!");
                    return computerScore += 1
                }
            }

            let maxRounds = prompt("How many rounds would you like to play? Odd number rounds are recommended")
            let playerScore = 0
            let computerScore = 0

            for (currentRound = 1; currentRound <= maxRounds; currentRound++) {
                playRound(playerSelection() , computerPlay())
                console.log("End of Round " + currentRound + "! Player " + playerScore + " : " + computerScore + " Computer")
            }

            if (playerScore === computerScore) {
                alert(`It\'s a Draw after ${maxRounds} rounds of Rock, Paper, Scissors! Thank you for playing!`)
            } else if (playerScore > computerScore) {
                alert(`You won after ${maxRounds} rounds of Rock, Paper, Scissors! The score was ${playerScore} : ${computerScore}! Thank you for playing!`)
            } else if (playerScore < computerScore) {
                alert(`You lost after ${maxRounds} rounds of Rock, Paper, Scissors... The score was ${playerScore} : ${computerScore}! You suck...`)
            } else {
                alert("Sorry, there was a problem with the scoreboard")
            }
        }    
    </script>
</body>
</html>